version: 2
engine_name: "AutoJob-Agent Feeder"

io:
  jobs_json: "ai-career/data/jobs.json"
  scored_jobs_json: "ai-career/v2/data/scored_jobs.json"
  emb_cache_json: "ai-career/v2/data/emb_cache.json"
  candidates_json: "ai-career/v2/output/candidates.json"
  apply_md: "ai-career/v2/output/apply.md"
  maybe_md: "ai-career/v2/output/maybe.md"
  skip_md: "ai-career/v2/output/skip.md"

hard_gate:
  # NEW: allowlist gate (strict). If a job doesn't match these regions, it is skipped.
  # We try matching location first; if location is empty, fall back to full text.
  allowlist:
    enabled: true
    match_order: "location_then_text"   # location_then_text | text_only
    allow_regex:
      # US
      - '(?i)\bUnited States\b'
      - '(?i)\bUnited States of America\b'
      - '(?i)\bUSA\b'
      - '(?i)\bU\.S\.A\.?\b'
      - '(?i)\bU\.S\.?\b'
      - '(?i)\bCalifornia\b'
      - '(?i)\bSan Francisco\b'
      - '(?i)\bMountain View\b'
      - '(?i)\bNew York\b'
      - '(?i)\bSeattle\b'
      - '(?i)\bAustin\b'
      - '(?i)\bChicago\b'
      # China
      - '(?i)\bChina\b'
      - '中国'
      - '北京'
      - '(?i)\bBeijing\b'
      - '上海'
      - '(?i)\bShanghai\b'
      - '深圳'
      - '(?i)\bShenzhen\b'
      - '杭州'
      - '(?i)\bHangzhou\b'
      - '广州'
      - '(?i)\bGuangzhou\b'
      - '香港'
      - '(?i)\bHong\s*Kong\b'
      # Singapore
      - '(?i)\bSingapore\b'
      - '新加坡'

  exclude_phrases:
    # clearance / citizenship hard blocks
    - "security clearance"
    - "must be a us citizen"
    - "u.s. citizen"
    - "citizenship required"
    - "ts/sci"
    - "doe q clearance"
    - "polygraph"

    # degree hard blocks (avoid PhD/Master-only roles)
    - "phd required"
    - "phd only"
    - "doctoral degree required"
    - "doctorate required"
    - "must be pursuing a phd"
    - "masters required"
    - "master's required"
    - "must be pursuing a master's"
    - "ms required"
    - "m.s. required"

  exclude_regex:
    # clearance / citizenship
    - '(?i)citizen(ship)?\s+required'
    - '(?i)security\s+clearance\s+(required|must)'
    - '(?i)ts\/?sci'

    # degree hard blocks (regex variants)
    - '(?i)ph\.?d\.?\s+(required|only)'
    - '(?i)doctorate\s+(required|only)'
    - '(?i)master''?s\s+(required|only)'
    - '(?i)ms\s+(required|only)'
    - '(?i)m\.?s\.?\s+(required|only)'

hard_scoring:
  must_have_keywords:
    python: 3
    "data pipeline": 3
    "machine learning": 2
    "llm": 2
    "sql": 2
    "git": 1
    "docker": 1
    "cloud": 1

  nice_to_have_keywords:
    "langchain": 2
    "rag": 2
    "vector database": 1
    "mlflow": 1
    "kedro": 1

  negative_keywords:
    "5+ years": -2
    "principal": -3
    "staff engineer": -3

semantic_scoring:
  model_name: "sentence-transformers/all-MiniLM-L6-v2"
  content_max_chars: 8000
  jd_excerpt_chars: 600
  normalize: "minmax"
  cache:
    enabled: true

fusion:
  w_hard: 0.45
  w_semantic: 0.55

triage:
  thresholds:
    apply: 0.72
    maybe: 0.30
  topN:
    apply: 50
    maybe: 120
  candidates:
    topN_total: 150